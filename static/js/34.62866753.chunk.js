(this["webpackJsonp@mozg/react-workspace"]=this["webpackJsonp@mozg/react-workspace"]||[]).push([[34],{409:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return h}));var o=n(39),r=n(42),i=n(40),c=n(41),a=n(8),s=n.n(a),d=n(3),l=[],u=console.log;console.log=function(){u.apply(console,["[".concat((new Date).toISOString().replace("T"," ").replace(/\..+/,""),"]")].concat(Array.prototype.slice.call(arguments))),l.push.apply(l,arguments)};var h=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={json:!1},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e={log:function(){var e=Array.prototype.slice.call(arguments).map((function(e){return"string"===typeof e?e:JSON.stringify(e)})).join(" ");document.querySelector("#log").textContent+=e+"\n"},clearLog:function(){document.querySelector("#log").textContent=""},setStatus:function(e){document.querySelector("#status").textContent=e},setContent:function(e){for(var t=document.querySelector("#content");t.hasChildNodes();)t.removeChild(t.lastChild);t.appendChild(e)}};if(window.addEventListener("error",(function(t){e&&e.setStatus&&(console.error(t),e.setStatus(t.message+" (Your browser may not support this feature.)"),t.preventDefault())})),"ondevicelight"in window?window.addEventListener("devicelight",(function(e){var t=document.querySelector("body");e.value<50?(t.classList.add("darklight"),t.classList.remove("brightlight")):(t.classList.add("brightlight"),t.classList.remove("darklight"))})):console.log("devicelight event not supported"),"bluetooth"in navigator&&navigator.bluetooth.requestDevice){navigator.bluetooth.requestDevice({filters:[{services:["heart_rate"]},{services:[6146,6147]},{services:["c48e6067-5295-48d3-8d5c-0395f61792b1"]},{name:"ExampleName"},{namePrefix:"Prefix"}],optionalServices:["battery_service"]}).then((function(e){console.log("Name: "+e.name)})).catch((function(e){console.log("Something went wrong. "+e)}))}else console.log("Fail: navigator.bluetooth.requestDevice");var t;function n(e,t){e.width=getComputedStyle(e).width.split("px")[0],e.height=getComputedStyle(e).height.split("px")[0];var n=Math.min(e.width/t.width,e.height/t.height),o=(e.width-t.width*n)/2,r=(e.height-t.height*n)/2;e.getContext("2d").clearRect(0,0,e.width,e.height),e.getContext("2d").drawImage(t,0,0,t.width,t.height,o,r,t.width*n,t.height*n)}function o(e){console.log("Permission "+e)}fetch("https://express.mozgbrasil.now.sh/").then((function(e){if(200===e.status)return e.json();throw new Error("Something went wrong on api server!")})).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),document.querySelector("#find-me").addEventListener("click",(function(){var e=document.querySelector("#geo_status"),t=document.querySelector("#geo_map_link");t.href="",t.textContent="",navigator.geolocation?(e.textContent="Locating\u2026",navigator.geolocation.getCurrentPosition((function(n){var o=n.coords.latitude,r=n.coords.longitude;e.textContent="",t.href="https://www.openstreetmap.org/#map=18/".concat(o,"/").concat(r),t.textContent="Latitude: ".concat(o," \xb0, Longitude: ").concat(r," \xb0")}),(function(){e.textContent="Unable to retrieve your location"}))):e.textContent="Geolocation is not supported by your browser"})),document.querySelector("#getUserMediaButton").addEventListener("click",(function(){navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){document.querySelector("video").srcObject=e;var n=e.getVideoTracks()[0];t=new ImageCapture(n)})).catch((function(e){return console.log(e)}))})),document.querySelector("#grabFrameButton").addEventListener("click",(function(){t.grabFrame().then((function(e){n(document.querySelector("#grabFrameCanvas"),e)})).catch((function(e){return console.log(e)}))})),document.querySelector("#takePhotoButton").addEventListener("click",(function(){t.takePhoto().then((function(e){return createImageBitmap(e)})).then((function(e){n(document.querySelector("#takePhotoCanvas"),e)})).catch((function(e){return console.log(e)}))})),navigator.permissions.query({name:"geolocation"}).then((function(e){("granted"===e.state||"prompt"===e.state||"denied"===e.state)&&o(e.state),e.onchange=function(){o(e.state)}})),window.addEventListener("userproximity",(function(e){e.near?navigator.mozPower.screenEnabled=!1:navigator.mozPower.screenEnabled=!0})),("vibrate"in window.navigator||"mozVibrate"in window.navigator)&&window.navigator.vibrate(200);var r=l,i=[];Object.entries(r).forEach((function(e){var t=e[1];"string"===typeof t&&i.push(t)})),r=i;var c=JSON.stringify(r);this.setState({json:c})}},{key:"render",value:function(){return Object(d.jsxs)(d.Fragment,{children:[void 0,Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})}),"Console",Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})}),Object(d.jsx)("code",{children:this.state.json}),Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})}),"Geolocation",Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})}),Object(d.jsx)("button",{id:"find-me",children:"Show my location"}),Object(d.jsx)("br",{}),Object(d.jsx)("p",{id:"geo_status",children:"\xa0"}),Object(d.jsx)("a",{id:"geo_map_link",href:"#top",target:"_blank",rel:"noopener noreferrer",children:"\xa0"}),Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})}),"ImageCapture",Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})}),Object(d.jsx)("h1",{children:"Image Capture / Grab Frame - Take Photo Sample"}),Object(d.jsxs)("div",{id:"results",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("video",{autoPlay:""}),Object(d.jsx)("button",{id:"getUserMediaButton",children:"Get User Media"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("canvas",{id:"grabFrameCanvas",width:"264",height:"198"}),Object(d.jsx)("button",{id:"grabFrameButton",children:"Grab Frame"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("canvas",{id:"takePhotoCanvas",width:"264",height:"198"}),Object(d.jsx)("button",{id:"takePhotoButton",children:"Take Photo"})]})]}),Object(d.jsx)("h3",{children:"Live Output"}),Object(d.jsxs)("div",{id:"output",className:"output",children:[Object(d.jsx)("div",{id:"content"}),Object(d.jsx)("div",{id:"status"}),Object(d.jsx)("pre",{id:"log"})]}),Object(d.jsx)("span",{children:Object(d.jsx)("hr",{})})]})}}]),n}(s.a.Component)}}]);
//# sourceMappingURL=34.62866753.chunk.js.map