{"version":3,"sources":["../../../shared/codepen.io/the-frantic-run-of-the-valorous-rabbit/index.jsx","../../../shared/codepen.io/the-frantic-run-of-the-valorous-rabbit/src/script.js"],"names":["App","greeting","name","_loaded","addScript","url","script","document","createElement","type","addEventListener","event","console","log","src","getElementsByTagName","appendChild","useState","count","useEffect","main","a","then","ret","setTimeout","itens","length","forEach","item","index","require","catch","error","className","id","href","target","scene","camera","aspectRatio","shadowLight","renderer","clock","levelInterval","fieldGameOver","fieldDistance","HEIGHT","WIDTH","hero","delta","floorRadius","speed","distance","monsterPos","monsterPosTarget","floorRotation","gameStatus","malusClearColor","blackMat","Audio","THREE","MeshPhongMaterial","color","shading","FlatShading","brownMat","shininess","greenMat","pinkMat","lightBrownMat","whiteMat","Math","PI","handleWindowResize","window","innerHeight","innerWidth","setSize","aspect","updateProjectionMatrix","handleMouseDown","jump","TweenMax","killTweensOf","monster","pawFL","position","pawFR","pawBL","pawBR","rotation","tail","head","eyeL","scale","eyeR","y","to","z","x","ease","Power4","easeInOut","torso","mouth","mesh","easeIn","delay","onComplete","resetGame","removeParticle","p","visible","updateMonsterPosition","run","sit","hang","heroHolder","add","this","carrot","obstacle","clearInterval","gameOver","angle","sin","cos","Hero","status","runningCycle","Group","body","torsoGeom","CubeGeometry","Mesh","castShadow","pantsGeom","pants","tailGeom","applyMatrix","Matrix4","makeTranslation","headGeom","cheekGeom","cheekR","cheekL","clone","noseGeom","nose","mouthGeom","makeRotationX","pawFGeom","pawBGeom","earGeom","vertices","earL","earR","eyeGeom","irisGeom","iris","children","traverse","object","receiveShadow","BonusParticles","bigParticleGeom","smallParticleGeom","parts","i","partPink","partGreen","set","push","prototype","explose","tx","random","ty","tz","s","easeOut","onCompleteParams","min","t","abs","_this","totalSpeed","Back","Power2","Monster","toothGeom","toothf","toothl","toothr","tongueGeometry","tongue","CylinderGeometry","makeRotationZ","pawGeom","nod","sp","tHeadRotY","tEarLRotX","tEarRRotX","tPawBLRot","tPawBLY","Power1","yoyo","repeat","tPawBRRot","tPawBRY","tPawFLRot","tPawFLY","tPawFRRot","tPawFRY","tMouthRot","tIrisY","tIrisZ","iris1","iris2","tHeadRotX","tTailRotY","Carrot","bodyGeom","leafGeom","leaf1","leaf2","Hedgehog","spikeGeom","row","col","floor","sb","st","sr","sl","Fir","truncGeom","height","checkCollision","db","sub","dm","bonusParticles","copy","from","malusClearAlpha","onUpdate","setClearColor","getMalus","updateLevel","loop","getDelta","d","innerHTML","updateDistance","render","requestAnimationFrame","init","Scene","fog","Fog","PerspectiveCamera","lookAt","Vector3","WebGLRenderer","alpha","antialias","setPixelRatio","devicePixelRatio","shadowMap","enabled","getElementById","domElement","Clock","globalLight","AmbientLight","DirectionalLight","shadow","left","right","top","bottom","near","far","mapSize","width","floorShadow","SphereGeometry","specular","transparent","opacity","floorGrass","MeshBasicMaterial","phi","theta","fir","Tree","vec","axis","quaternion","setFromUnitVectors","normalize","createFirs","setInterval","Object3D","trunc","Trunc","truncHeight","topRadius","bottomRadius","mats","matTrunc","geom","noise","v","computeVertexNormals","size","fruitGeometry","matFruit","fruit","h","thickness","branchGeometry","branch"],"mappings":"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","file":"static/js/18.07099730.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"./src/style.scss\";\n\nfunction App({ greeting, name }) {\n  let _loaded = {};\n  function addScript(url) {\n    if (!_loaded[url]) {\n      var script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.addEventListener(\"load\", function (event) {\n        console.log(\"script loaded: \", event);\n      });\n      script.src = url;\n      document.getElementsByTagName(\"head\")[0].appendChild(script);\n      //   document.head.appendChild(script);\n      _loaded[url] = true;\n      return _loaded;\n    }\n  }\n\n  const [count, setCount] = useState(0);\n  useEffect(() => {\n    //\n    (function () {\n      async function main(url) {\n        return addScript(url);\n      }\n\n      main(\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r80/three.js\")\n        .then((ret) => {\n          console.log(\"ret: \", ret);\n          //\n          setTimeout(function () {\n            let itens = [\n              \"https://cdnjs.cloudflare.com/ajax/libs/gsap/1.19.0/TweenMax.min.js\",\n              \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/264161/OrbitControls.js\",\n            ];\n\n            console.log(` itens.length: ${itens.length} `);\n\n            itens.forEach(function (item, index) {\n              console.log(`index: ${index} - item: `, item);\n\n              main(item)\n                .then((ret) => {\n                  //   console.log(\n                  //     `index: ${index} - itens.length: ${itens.length} -item_ret: `,\n                  //     item_ret\n                  //   );\n\n                  if (index === itens.length - 1) {\n                    console.log(`script`);\n                    setTimeout(function () {\n                      require(\"./src/script.js\");\n                    }, 1000);\n                  }\n                })\n                .catch(console.error);\n            });\n          }, 500);\n          //\n        })\n        .catch(console.error);\n    })();\n    //\n  }, [count]); // Apenas re-execute o efeito quando o count mudar\n\n  return (\n    <div className='valorous-rabbit'>\n      <div id='world' />\n      <div id='gameoverInstructions'>Game Over</div>\n      <div id='dist'>\n        <div className='label'>distance</div>\n        <div id='distValue'>000</div>\n      </div>\n\n      <div id='instructions'>\n        Click to jump\n        <span className='lightInstructions'>\n          {\" \"}\n          — Grab the carrots / avoid the hedgehogs\n        </span>\n      </div>\n\n      <div id='credits'>\n        <p>\n          <a href='https://codepen.io/Yakudoo/' target='blank'>\n            other codepens\n          </a>{\" \"}\n          |{\" \"}\n          <a href='https://www.epic.net' target='blank'>\n            epic.net\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","//THREEJS RELATED VARIABLES\n\nvar scene,\n  camera,\n  fieldOfView,\n  aspectRatio,\n  nearPlane,\n  farPlane,\n  gobalLight,\n  shadowLight,\n  backLight,\n  renderer,\n  container,\n  controls,\n  clock;\nvar delta = 0;\nvar floorRadius = 200;\nvar speed = 6;\nvar distance = 0;\nvar level = 1;\nvar levelInterval;\nvar levelUpdateFreq = 3000;\nvar initSpeed = 5;\nvar maxSpeed = 48;\nvar monsterPos = 0.65;\nvar monsterPosTarget = 0.65;\nvar floorRotation = 0;\nvar collisionObstacle = 10;\nvar collisionBonus = 20;\nvar gameStatus = \"play\";\nvar cameraPosGame = 160;\nvar cameraPosGameOver = 260;\nvar monsterAcceleration = 0.004;\nvar malusClearColor = 0xb44b39;\nvar malusClearAlpha = 0;\nvar audio = new Audio(\n  \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/264161/Antonio-Vivaldi-Summer_01.mp3\"\n);\n\nvar fieldGameOver, fieldDistance;\n\n//SCREEN & MOUSE VARIABLES\n\nvar HEIGHT,\n  WIDTH,\n  windowHalfX,\n  windowHalfY,\n  mousePos = {\n    x: 0,\n    y: 0,\n  };\n\n//3D OBJECTS VARIABLES\n\nvar hero;\n\n// Materials\nvar blackMat = new THREE.MeshPhongMaterial({\n  color: 0x100707,\n  shading: THREE.FlatShading,\n});\n\nvar brownMat = new THREE.MeshPhongMaterial({\n  color: 0xb44b39,\n  shininess: 0,\n  shading: THREE.FlatShading,\n});\n\nvar greenMat = new THREE.MeshPhongMaterial({\n  color: 0x7abf8e,\n  shininess: 0,\n  shading: THREE.FlatShading,\n});\n\nvar pinkMat = new THREE.MeshPhongMaterial({\n  color: 0xdc5f45, //0xb43b29,//0xff5b49,\n  shininess: 0,\n  shading: THREE.FlatShading,\n});\n\nvar lightBrownMat = new THREE.MeshPhongMaterial({\n  color: 0xe07a57,\n  shading: THREE.FlatShading,\n});\n\nvar whiteMat = new THREE.MeshPhongMaterial({\n  color: 0xa49789,\n  shading: THREE.FlatShading,\n});\nvar skinMat = new THREE.MeshPhongMaterial({\n  color: 0xff9ea5,\n  shading: THREE.FlatShading,\n});\n\n// OTHER VARIABLES\n\nvar PI = Math.PI;\n\n//INIT THREE JS, SCREEN AND MOUSE EVENTS\n\nfunction initScreenAnd3D() {\n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n  windowHalfX = WIDTH / 2;\n  windowHalfY = HEIGHT / 2;\n\n  scene = new THREE.Scene();\n\n  scene.fog = new THREE.Fog(0xd6eae6, 160, 350);\n\n  aspectRatio = WIDTH / HEIGHT;\n  fieldOfView = 50;\n  nearPlane = 1;\n  farPlane = 2000;\n  camera = new THREE.PerspectiveCamera(\n    fieldOfView,\n    aspectRatio,\n    nearPlane,\n    farPlane\n  );\n  camera.position.x = 0;\n  camera.position.z = cameraPosGame;\n  camera.position.y = 30;\n  camera.lookAt(new THREE.Vector3(0, 30, 0));\n\n  renderer = new THREE.WebGLRenderer({\n    alpha: true,\n    antialias: true,\n  });\n  renderer.setPixelRatio(window.devicePixelRatio);\n  renderer.setClearColor(malusClearColor, malusClearAlpha);\n\n  renderer.setSize(WIDTH, HEIGHT);\n  renderer.shadowMap.enabled = true;\n\n  container = document.getElementById(\"world\");\n  container.appendChild(renderer.domElement);\n\n  window.addEventListener(\"resize\", handleWindowResize, false);\n  document.addEventListener(\"mousedown\", handleMouseDown, false);\n  document.addEventListener(\"touchend\", handleMouseDown, false);\n\n  /*\n  controls = new THREE.OrbitControls(camera, renderer.domElement);\n  //controls.minPolarAngle = -Math.PI / 2; \n  //controls.maxPolarAngle = Math.PI / 2;\n  //controls.noZoom = true;\n  controls.noPan = true;\n  //*/\n\n  clock = new THREE.Clock();\n}\n\nfunction handleWindowResize() {\n  HEIGHT = window.innerHeight;\n  WIDTH = window.innerWidth;\n  windowHalfX = WIDTH / 2;\n  windowHalfY = HEIGHT / 2;\n  renderer.setSize(WIDTH, HEIGHT);\n  camera.aspect = WIDTH / HEIGHT;\n  camera.updateProjectionMatrix();\n}\n\nfunction handleMouseDown(event) {\n  if (gameStatus == \"play\") hero.jump();\n  else if (gameStatus == \"readyToReplay\") {\n    replay();\n  }\n}\n\nfunction createLights() {\n  globalLight = new THREE.AmbientLight(0xffffff, 0.9);\n\n  shadowLight = new THREE.DirectionalLight(0xffffff, 1);\n  shadowLight.position.set(-30, 40, 20);\n  shadowLight.castShadow = true;\n  shadowLight.shadow.camera.left = -400;\n  shadowLight.shadow.camera.right = 400;\n  shadowLight.shadow.camera.top = 400;\n  shadowLight.shadow.camera.bottom = -400;\n  shadowLight.shadow.camera.near = 1;\n  shadowLight.shadow.camera.far = 2000;\n  shadowLight.shadow.mapSize.width = shadowLight.shadow.mapSize.height = 2048;\n\n  scene.add(globalLight);\n  scene.add(shadowLight);\n}\n\nfunction createFloor() {\n  floorShadow = new THREE.Mesh(\n    new THREE.SphereGeometry(floorRadius, 50, 50),\n    new THREE.MeshPhongMaterial({\n      color: 0x7abf8e,\n      specular: 0x000000,\n      shininess: 1,\n      transparent: true,\n      opacity: 0.5,\n    })\n  );\n  //floorShadow.rotation.x = -Math.PI / 2;\n  floorShadow.receiveShadow = true;\n\n  floorGrass = new THREE.Mesh(\n    new THREE.SphereGeometry(floorRadius - 0.5, 50, 50),\n    new THREE.MeshBasicMaterial({\n      color: 0x7abf8e,\n    })\n  );\n  //floor.rotation.x = -Math.PI / 2;\n  floorGrass.receiveShadow = false;\n\n  floor = new THREE.Group();\n  floor.position.y = -floorRadius;\n\n  floor.add(floorShadow);\n  floor.add(floorGrass);\n  scene.add(floor);\n}\n\nHero = function () {\n  this.status = \"running\";\n  this.runningCycle = 0;\n  this.mesh = new THREE.Group();\n  this.body = new THREE.Group();\n  this.mesh.add(this.body);\n\n  var torsoGeom = new THREE.CubeGeometry(7, 7, 10, 1);\n\n  this.torso = new THREE.Mesh(torsoGeom, brownMat);\n  this.torso.position.z = 0;\n  this.torso.position.y = 7;\n  this.torso.castShadow = true;\n  this.body.add(this.torso);\n\n  var pantsGeom = new THREE.CubeGeometry(9, 9, 5, 1);\n  this.pants = new THREE.Mesh(pantsGeom, whiteMat);\n  this.pants.position.z = -3;\n  this.pants.position.y = 0;\n  this.pants.castShadow = true;\n  this.torso.add(this.pants);\n\n  var tailGeom = new THREE.CubeGeometry(3, 3, 3, 1);\n  tailGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, -2));\n  this.tail = new THREE.Mesh(tailGeom, lightBrownMat);\n  this.tail.position.z = -4;\n  this.tail.position.y = 5;\n  this.tail.castShadow = true;\n  this.torso.add(this.tail);\n\n  this.torso.rotation.x = -Math.PI / 8;\n\n  var headGeom = new THREE.CubeGeometry(10, 10, 13, 1);\n\n  headGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, 7.5));\n  this.head = new THREE.Mesh(headGeom, brownMat);\n  this.head.position.z = 2;\n  this.head.position.y = 11;\n  this.head.castShadow = true;\n  this.body.add(this.head);\n\n  var cheekGeom = new THREE.CubeGeometry(1, 4, 4, 1);\n  this.cheekR = new THREE.Mesh(cheekGeom, pinkMat);\n  this.cheekR.position.x = -5;\n  this.cheekR.position.z = 7;\n  this.cheekR.position.y = -2.5;\n  this.cheekR.castShadow = true;\n  this.head.add(this.cheekR);\n\n  this.cheekL = this.cheekR.clone();\n  this.cheekL.position.x = -this.cheekR.position.x;\n  this.head.add(this.cheekL);\n\n  var noseGeom = new THREE.CubeGeometry(6, 6, 3, 1);\n  this.nose = new THREE.Mesh(noseGeom, lightBrownMat);\n  this.nose.position.z = 13.5;\n  this.nose.position.y = 2.6;\n  this.nose.castShadow = true;\n  this.head.add(this.nose);\n\n  var mouthGeom = new THREE.CubeGeometry(4, 2, 4, 1);\n  mouthGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, 3));\n  mouthGeom.applyMatrix(new THREE.Matrix4().makeRotationX(Math.PI / 12));\n  this.mouth = new THREE.Mesh(mouthGeom, brownMat);\n  this.mouth.position.z = 8;\n  this.mouth.position.y = -4;\n  this.mouth.castShadow = true;\n  this.head.add(this.mouth);\n\n  var pawFGeom = new THREE.CubeGeometry(3, 3, 3, 1);\n  this.pawFR = new THREE.Mesh(pawFGeom, lightBrownMat);\n  this.pawFR.position.x = -2;\n  this.pawFR.position.z = 6;\n  this.pawFR.position.y = 1.5;\n  this.pawFR.castShadow = true;\n  this.body.add(this.pawFR);\n\n  this.pawFL = this.pawFR.clone();\n  this.pawFL.position.x = -this.pawFR.position.x;\n  this.pawFL.castShadow = true;\n  this.body.add(this.pawFL);\n\n  var pawBGeom = new THREE.CubeGeometry(3, 3, 6, 1);\n  this.pawBL = new THREE.Mesh(pawBGeom, lightBrownMat);\n  this.pawBL.position.y = 1.5;\n  this.pawBL.position.z = 0;\n  this.pawBL.position.x = 5;\n  this.pawBL.castShadow = true;\n  this.body.add(this.pawBL);\n\n  this.pawBR = this.pawBL.clone();\n  this.pawBR.position.x = -this.pawBL.position.x;\n  this.pawBR.castShadow = true;\n  this.body.add(this.pawBR);\n\n  var earGeom = new THREE.CubeGeometry(7, 18, 2, 1);\n  earGeom.vertices[6].x += 2;\n  earGeom.vertices[6].z += 0.5;\n\n  earGeom.vertices[7].x += 2;\n  earGeom.vertices[7].z -= 0.5;\n\n  earGeom.vertices[2].x -= 2;\n  earGeom.vertices[2].z -= 0.5;\n\n  earGeom.vertices[3].x -= 2;\n  earGeom.vertices[3].z += 0.5;\n  earGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 9, 0));\n\n  this.earL = new THREE.Mesh(earGeom, brownMat);\n  this.earL.position.x = 2;\n  this.earL.position.z = 2.5;\n  this.earL.position.y = 5;\n  this.earL.rotation.z = -Math.PI / 12;\n  this.earL.castShadow = true;\n  this.head.add(this.earL);\n\n  this.earR = this.earL.clone();\n  this.earR.position.x = -this.earL.position.x;\n  this.earR.rotation.z = -this.earL.rotation.z;\n  this.earR.castShadow = true;\n  this.head.add(this.earR);\n\n  var eyeGeom = new THREE.CubeGeometry(2, 4, 4);\n\n  this.eyeL = new THREE.Mesh(eyeGeom, whiteMat);\n  this.eyeL.position.x = 5;\n  this.eyeL.position.z = 5.5;\n  this.eyeL.position.y = 2.9;\n  this.eyeL.castShadow = true;\n  this.head.add(this.eyeL);\n\n  var irisGeom = new THREE.CubeGeometry(0.6, 2, 2);\n\n  this.iris = new THREE.Mesh(irisGeom, blackMat);\n  this.iris.position.x = 1.2;\n  this.iris.position.y = 1;\n  this.iris.position.z = 1;\n  this.eyeL.add(this.iris);\n\n  this.eyeR = this.eyeL.clone();\n  this.eyeR.children[0].position.x = -this.iris.position.x;\n\n  this.eyeR.position.x = -this.eyeL.position.x;\n  this.head.add(this.eyeR);\n\n  this.body.traverse(function (object) {\n    if (object instanceof THREE.Mesh) {\n      object.castShadow = true;\n      object.receiveShadow = true;\n    }\n  });\n};\n\nBonusParticles = function () {\n  this.mesh = new THREE.Group();\n  var bigParticleGeom = new THREE.CubeGeometry(10, 10, 10, 1);\n  var smallParticleGeom = new THREE.CubeGeometry(5, 5, 5, 1);\n  this.parts = [];\n  for (var i = 0; i < 10; i++) {\n    var partPink = new THREE.Mesh(bigParticleGeom, pinkMat);\n    var partGreen = new THREE.Mesh(smallParticleGeom, greenMat);\n    partGreen.scale.set(0.5, 0.5, 0.5);\n    this.parts.push(partPink);\n    this.parts.push(partGreen);\n    this.mesh.add(partPink);\n    this.mesh.add(partGreen);\n  }\n};\n\nBonusParticles.prototype.explose = function () {\n  var _this = this;\n  var explosionSpeed = 0.5;\n  for (var i = 0; i < this.parts.length; i++) {\n    var tx = -50 + Math.random() * 100;\n    var ty = -50 + Math.random() * 100;\n    var tz = -50 + Math.random() * 100;\n    var p = this.parts[i];\n    p.position.set(0, 0, 0);\n    p.scale.set(1, 1, 1);\n    p.visible = true;\n    var s = explosionSpeed + Math.random() * 0.5;\n    TweenMax.to(p.position, s, { x: tx, y: ty, z: tz, ease: Power4.easeOut });\n    TweenMax.to(p.scale, s, {\n      x: 0.01,\n      y: 0.01,\n      z: 0.01,\n      ease: Power4.easeOut,\n      onComplete: removeParticle,\n      onCompleteParams: [p],\n    });\n  }\n};\n\nfunction removeParticle(p) {\n  p.visible = false;\n}\n\nHero.prototype.run = function () {\n  this.status = \"running\";\n\n  var s = Math.min(speed, maxSpeed);\n\n  this.runningCycle += delta * s * 0.7;\n  this.runningCycle = this.runningCycle % (Math.PI * 2);\n  var t = this.runningCycle;\n\n  var amp = 4;\n  var disp = 0.2;\n\n  // BODY\n\n  this.body.position.y = 6 + Math.sin(t - Math.PI / 2) * amp;\n  this.body.rotation.x = 0.2 + Math.sin(t - Math.PI / 2) * amp * 0.1;\n\n  this.torso.rotation.x = Math.sin(t - Math.PI / 2) * amp * 0.1;\n  this.torso.position.y = 7 + Math.sin(t - Math.PI / 2) * amp * 0.5;\n\n  // MOUTH\n  this.mouth.rotation.x = Math.PI / 16 + Math.cos(t) * amp * 0.05;\n\n  // HEAD\n  this.head.position.z = 2 + Math.sin(t - Math.PI / 2) * amp * 0.5;\n  this.head.position.y = 8 + Math.cos(t - Math.PI / 2) * amp * 0.7;\n  this.head.rotation.x = -0.2 + Math.sin(t + Math.PI) * amp * 0.1;\n\n  // EARS\n  this.earL.rotation.x = Math.cos(-Math.PI / 2 + t) * (amp * 0.2);\n  this.earR.rotation.x = Math.cos(-Math.PI / 2 + 0.2 + t) * (amp * 0.3);\n\n  // EYES\n  this.eyeR.scale.y = this.eyeL.scale.y =\n    0.7 + Math.abs(Math.cos(-Math.PI / 4 + t * 0.5)) * 0.6;\n\n  // TAIL\n  this.tail.rotation.x = Math.cos(Math.PI / 2 + t) * amp * 0.3;\n\n  // FRONT RIGHT PAW\n  this.pawFR.position.y = 1.5 + Math.sin(t) * amp;\n  this.pawFR.rotation.x = (Math.cos(t) * Math.PI) / 4;\n\n  this.pawFR.position.z = 6 - Math.cos(t) * amp * 2;\n\n  // FRONT LEFT PAW\n\n  this.pawFL.position.y = 1.5 + Math.sin(disp + t) * amp;\n  this.pawFL.rotation.x = (Math.cos(t) * Math.PI) / 4;\n\n  this.pawFL.position.z = 6 - Math.cos(disp + t) * amp * 2;\n\n  // BACK RIGHT PAW\n  this.pawBR.position.y = 1.5 + Math.sin(Math.PI + t) * amp;\n  this.pawBR.rotation.x = (Math.cos(t + Math.PI * 1.5) * Math.PI) / 3;\n\n  this.pawBR.position.z = -Math.cos(Math.PI + t) * amp;\n\n  // BACK LEFT PAW\n  this.pawBL.position.y = 1.5 + Math.sin(Math.PI + t) * amp;\n  this.pawBL.rotation.x = (Math.cos(t + Math.PI * 1.5) * Math.PI) / 3;\n\n  this.pawBL.position.z = -Math.cos(Math.PI + t) * amp;\n};\n\nHero.prototype.jump = function () {\n  if (this.status == \"jumping\") return;\n  this.status = \"jumping\";\n  var _this = this;\n  var totalSpeed = 10 / speed;\n  var jumpHeight = 45;\n\n  TweenMax.to(this.earL.rotation, totalSpeed, {\n    x: \"+=.3\",\n    ease: Back.easeOut,\n  });\n  TweenMax.to(this.earR.rotation, totalSpeed, {\n    x: \"-=.3\",\n    ease: Back.easeOut,\n  });\n\n  TweenMax.to(this.pawFL.rotation, totalSpeed, {\n    x: \"+=.7\",\n    ease: Back.easeOut,\n  });\n  TweenMax.to(this.pawFR.rotation, totalSpeed, {\n    x: \"-=.7\",\n    ease: Back.easeOut,\n  });\n  TweenMax.to(this.pawBL.rotation, totalSpeed, {\n    x: \"+=.7\",\n    ease: Back.easeOut,\n  });\n  TweenMax.to(this.pawBR.rotation, totalSpeed, {\n    x: \"-=.7\",\n    ease: Back.easeOut,\n  });\n\n  TweenMax.to(this.tail.rotation, totalSpeed, { x: \"+=1\", ease: Back.easeOut });\n\n  TweenMax.to(this.mouth.rotation, totalSpeed, { x: 0.5, ease: Back.easeOut });\n\n  TweenMax.to(this.mesh.position, totalSpeed / 2, {\n    y: jumpHeight,\n    ease: Power2.easeOut,\n  });\n  TweenMax.to(this.mesh.position, totalSpeed / 2, {\n    y: 0,\n    ease: Power4.easeIn,\n    delay: totalSpeed / 2,\n    onComplete: function () {\n      //t = 0;\n      _this.status = \"running\";\n    },\n  });\n};\n\nMonster = function () {\n  this.runningCycle = 0;\n\n  this.mesh = new THREE.Group();\n  this.body = new THREE.Group();\n\n  var torsoGeom = new THREE.CubeGeometry(15, 15, 20, 1);\n  this.torso = new THREE.Mesh(torsoGeom, blackMat);\n\n  var headGeom = new THREE.CubeGeometry(20, 20, 40, 1);\n  headGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, 20));\n  this.head = new THREE.Mesh(headGeom, blackMat);\n  this.head.position.z = 12;\n  this.head.position.y = 2;\n\n  var mouthGeom = new THREE.CubeGeometry(10, 4, 20, 1);\n  mouthGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, -2, 10));\n  this.mouth = new THREE.Mesh(mouthGeom, blackMat);\n  this.mouth.position.y = -8;\n  this.mouth.rotation.x = 0.4;\n  this.mouth.position.z = 4;\n\n  this.heroHolder = new THREE.Group();\n  this.heroHolder.position.z = 20;\n  this.mouth.add(this.heroHolder);\n\n  var toothGeom = new THREE.CubeGeometry(2, 2, 1, 1);\n\n  toothGeom.vertices[1].x -= 1;\n  toothGeom.vertices[4].x += 1;\n  toothGeom.vertices[5].x += 1;\n  toothGeom.vertices[0].x -= 1;\n\n  for (var i = 0; i < 3; i++) {\n    var toothf = new THREE.Mesh(toothGeom, whiteMat);\n    toothf.position.x = -2.8 + i * 2.5;\n    toothf.position.y = 1;\n    toothf.position.z = 19;\n\n    var toothl = new THREE.Mesh(toothGeom, whiteMat);\n    toothl.rotation.y = Math.PI / 2;\n    toothl.position.z = 12 + i * 2.5;\n    toothl.position.y = 1;\n    toothl.position.x = 4;\n\n    var toothr = toothl.clone();\n    toothl.position.x = -4;\n\n    this.mouth.add(toothf);\n    this.mouth.add(toothl);\n    this.mouth.add(toothr);\n  }\n\n  var tongueGeometry = new THREE.CubeGeometry(6, 1, 14);\n  tongueGeometry.applyMatrix(new THREE.Matrix4().makeTranslation(0, 0, 7));\n\n  this.tongue = new THREE.Mesh(tongueGeometry, pinkMat);\n  this.tongue.position.z = 2;\n  this.tongue.rotation.x = -0.2;\n  this.mouth.add(this.tongue);\n\n  var noseGeom = new THREE.CubeGeometry(4, 4, 4, 1);\n  this.nose = new THREE.Mesh(noseGeom, pinkMat);\n  this.nose.position.z = 39.5;\n  this.nose.position.y = 9;\n  this.head.add(this.nose);\n\n  this.head.add(this.mouth);\n\n  var eyeGeom = new THREE.CubeGeometry(2, 3, 3);\n\n  this.eyeL = new THREE.Mesh(eyeGeom, whiteMat);\n  this.eyeL.position.x = 10;\n  this.eyeL.position.z = 5;\n  this.eyeL.position.y = 5;\n  this.eyeL.castShadow = true;\n  this.head.add(this.eyeL);\n\n  var irisGeom = new THREE.CubeGeometry(0.6, 1, 1);\n\n  this.iris = new THREE.Mesh(irisGeom, blackMat);\n  this.iris.position.x = 1.2;\n  this.iris.position.y = -1;\n  this.iris.position.z = 1;\n  this.eyeL.add(this.iris);\n\n  this.eyeR = this.eyeL.clone();\n  this.eyeR.children[0].position.x = -this.iris.position.x;\n  this.eyeR.position.x = -this.eyeL.position.x;\n  this.head.add(this.eyeR);\n\n  var earGeom = new THREE.CubeGeometry(8, 6, 2, 1);\n  earGeom.vertices[1].x -= 4;\n  earGeom.vertices[4].x += 4;\n  earGeom.vertices[5].x += 4;\n  earGeom.vertices[5].z -= 2;\n  earGeom.vertices[0].x -= 4;\n  earGeom.vertices[0].z -= 2;\n\n  earGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 3, 0));\n\n  this.earL = new THREE.Mesh(earGeom, blackMat);\n  this.earL.position.x = 6;\n  this.earL.position.z = 1;\n  this.earL.position.y = 10;\n  this.earL.castShadow = true;\n  this.head.add(this.earL);\n\n  this.earR = this.earL.clone();\n  this.earR.position.x = -this.earL.position.x;\n  this.earR.rotation.z = -this.earL.rotation.z;\n  this.head.add(this.earR);\n\n  var eyeGeom = new THREE.CubeGeometry(2, 4, 4);\n\n  var tailGeom = new THREE.CylinderGeometry(5, 2, 20, 4, 1);\n  tailGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 10, 0));\n  tailGeom.applyMatrix(new THREE.Matrix4().makeRotationX(-Math.PI / 2));\n  tailGeom.applyMatrix(new THREE.Matrix4().makeRotationZ(Math.PI / 4));\n\n  this.tail = new THREE.Mesh(tailGeom, blackMat);\n  this.tail.position.z = -10;\n  this.tail.position.y = 4;\n  this.torso.add(this.tail);\n\n  var pawGeom = new THREE.CylinderGeometry(1.5, 0, 10);\n  pawGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, -5, 0));\n  this.pawFL = new THREE.Mesh(pawGeom, blackMat);\n  this.pawFL.position.y = -7.5;\n  this.pawFL.position.z = 8.5;\n  this.pawFL.position.x = 5.5;\n  this.torso.add(this.pawFL);\n\n  this.pawFR = this.pawFL.clone();\n  this.pawFR.position.x = -this.pawFL.position.x;\n  this.torso.add(this.pawFR);\n\n  this.pawBR = this.pawFR.clone();\n  this.pawBR.position.z = -this.pawFL.position.z;\n  this.torso.add(this.pawBR);\n\n  this.pawBL = this.pawBR.clone();\n  this.pawBL.position.x = this.pawFL.position.x;\n  this.torso.add(this.pawBL);\n\n  this.mesh.add(this.body);\n  this.torso.add(this.head);\n  this.body.add(this.torso);\n\n  this.torso.castShadow = true;\n  this.head.castShadow = true;\n  this.pawFL.castShadow = true;\n  this.pawFR.castShadow = true;\n  this.pawBL.castShadow = true;\n  this.pawBR.castShadow = true;\n\n  this.body.rotation.y = Math.PI / 2;\n};\n\nMonster.prototype.run = function () {\n  var s = Math.min(speed, maxSpeed);\n  this.runningCycle += delta * s * 0.7;\n  this.runningCycle = this.runningCycle % (Math.PI * 2);\n  var t = this.runningCycle;\n\n  this.pawFR.rotation.x = (Math.sin(t) * Math.PI) / 4;\n  this.pawFR.position.y = -5.5 - Math.sin(t);\n  this.pawFR.position.z = 7.5 + Math.cos(t);\n\n  this.pawFL.rotation.x = (Math.sin(t + 0.4) * Math.PI) / 4;\n  this.pawFL.position.y = -5.5 - Math.sin(t + 0.4);\n  this.pawFL.position.z = 7.5 + Math.cos(t + 0.4);\n\n  this.pawBL.rotation.x = (Math.sin(t + 2) * Math.PI) / 4;\n  this.pawBL.position.y = -5.5 - Math.sin(t + 3.8);\n  this.pawBL.position.z = -7.5 + Math.cos(t + 3.8);\n\n  this.pawBR.rotation.x = (Math.sin(t + 2.4) * Math.PI) / 4;\n  this.pawBR.position.y = -5.5 - Math.sin(t + 3.4);\n  this.pawBR.position.z = -7.5 + Math.cos(t + 3.4);\n\n  this.torso.rotation.x = (Math.sin(t) * Math.PI) / 8;\n  this.torso.position.y = 3 - Math.sin(t + Math.PI / 2) * 3;\n\n  //this.head.position.y = 5-Math.sin(t+Math.PI/2)*2;\n  this.head.rotation.x = -0.1 + Math.sin(-t - 1) * 0.4;\n  this.mouth.rotation.x = 0.2 + Math.sin(t + Math.PI + 0.3) * 0.4;\n\n  this.tail.rotation.x = 0.2 + Math.sin(t - Math.PI / 2);\n\n  this.eyeR.scale.y = 0.5 + Math.sin(t + Math.PI) * 0.5;\n};\n\nHero.prototype.nod = function () {\n  var _this = this;\n  var sp = 0.5 + Math.random();\n\n  // HEAD\n  var tHeadRotY = -Math.PI / 6 + (Math.random() * Math.PI) / 3;\n  TweenMax.to(this.head.rotation, sp, {\n    y: tHeadRotY,\n    ease: Power4.easeInOut,\n    onComplete: function () {\n      _this.nod();\n    },\n  });\n\n  // EARS\n  var tEarLRotX = Math.PI / 4 + (Math.random() * Math.PI) / 6;\n  var tEarRRotX = Math.PI / 4 + (Math.random() * Math.PI) / 6;\n\n  TweenMax.to(this.earL.rotation, sp, { x: tEarLRotX, ease: Power4.easeInOut });\n  TweenMax.to(this.earR.rotation, sp, { x: tEarRRotX, ease: Power4.easeInOut });\n\n  // PAWS BACK LEFT\n\n  var tPawBLRot = (Math.random() * Math.PI) / 2;\n  var tPawBLY = -4 + Math.random() * 8;\n\n  TweenMax.to(this.pawBL.rotation, sp / 2, {\n    x: tPawBLRot,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n  TweenMax.to(this.pawBL.position, sp / 2, {\n    y: tPawBLY,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n\n  // PAWS BACK RIGHT\n\n  var tPawBRRot = (Math.random() * Math.PI) / 2;\n  var tPawBRY = -4 + Math.random() * 8;\n  TweenMax.to(this.pawBR.rotation, sp / 2, {\n    x: tPawBRRot,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n  TweenMax.to(this.pawBR.position, sp / 2, {\n    y: tPawBRY,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n\n  // PAWS FRONT LEFT\n\n  var tPawFLRot = (Math.random() * Math.PI) / 2;\n  var tPawFLY = -4 + Math.random() * 8;\n\n  TweenMax.to(this.pawFL.rotation, sp / 2, {\n    x: tPawFLRot,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n\n  TweenMax.to(this.pawFL.position, sp / 2, {\n    y: tPawFLY,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n\n  // PAWS FRONT RIGHT\n\n  var tPawFRRot = (Math.random() * Math.PI) / 2;\n  var tPawFRY = -4 + Math.random() * 8;\n\n  TweenMax.to(this.pawFR.rotation, sp / 2, {\n    x: tPawFRRot,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n\n  TweenMax.to(this.pawFR.position, sp / 2, {\n    y: tPawFRY,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 2,\n  });\n\n  // MOUTH\n  var tMouthRot = (Math.random() * Math.PI) / 8;\n  TweenMax.to(this.mouth.rotation, sp, {\n    x: tMouthRot,\n    ease: Power1.easeInOut,\n  });\n  // IRIS\n  var tIrisY = -1 + Math.random() * 2;\n  var tIrisZ = -1 + Math.random() * 2;\n  var iris1 = this.iris;\n  var iris2 = this.eyeR.children[0];\n  TweenMax.to([iris1.position, iris2.position], sp, {\n    y: tIrisY,\n    z: tIrisZ,\n    ease: Power1.easeInOut,\n  });\n\n  //EYES\n  if (Math.random() > 0.2)\n    TweenMax.to([this.eyeR.scale, this.eyeL.scale], sp / 8, {\n      y: 0,\n      ease: Power1.easeInOut,\n      yoyo: true,\n      repeat: 1,\n    });\n};\n\nHero.prototype.hang = function () {\n  var _this = this;\n  var sp = 1;\n  var ease = Power4.easeOut;\n\n  TweenMax.killTweensOf(this.eyeL.scale);\n  TweenMax.killTweensOf(this.eyeR.scale);\n\n  this.body.rotation.x = 0;\n  this.torso.rotation.x = 0;\n  this.body.position.y = 0;\n  this.torso.position.y = 7;\n\n  TweenMax.to(this.mesh.rotation, sp, { y: 0, ease: ease });\n  TweenMax.to(this.mesh.position, sp, { y: -7, z: 6, ease: ease });\n  TweenMax.to(this.head.rotation, sp, {\n    x: Math.PI / 6,\n    ease: ease,\n    onComplete: function () {\n      _this.nod();\n    },\n  });\n\n  TweenMax.to(this.earL.rotation, sp, { x: Math.PI / 3, ease: ease });\n  TweenMax.to(this.earR.rotation, sp, { x: Math.PI / 3, ease: ease });\n\n  TweenMax.to(this.pawFL.position, sp, { y: -1, z: 3, ease: ease });\n  TweenMax.to(this.pawFR.position, sp, { y: -1, z: 3, ease: ease });\n  TweenMax.to(this.pawBL.position, sp, { y: -2, z: -3, ease: ease });\n  TweenMax.to(this.pawBR.position, sp, { y: -2, z: -3, ease: ease });\n\n  TweenMax.to(this.eyeL.scale, sp, { y: 1, ease: ease });\n  TweenMax.to(this.eyeR.scale, sp, { y: 1, ease: ease });\n};\n\nMonster.prototype.nod = function () {\n  var _this = this;\n  var sp = 1 + Math.random() * 2;\n\n  // HEAD\n  var tHeadRotY = -Math.PI / 3 + Math.random() * 0.5;\n  var tHeadRotX = Math.PI / 3 - 0.2 + Math.random() * 0.4;\n  TweenMax.to(this.head.rotation, sp, {\n    x: tHeadRotX,\n    y: tHeadRotY,\n    ease: Power4.easeInOut,\n    onComplete: function () {\n      _this.nod();\n    },\n  });\n\n  // TAIL\n\n  var tTailRotY = -Math.PI / 4;\n  TweenMax.to(this.tail.rotation, sp / 8, {\n    y: tTailRotY,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 8,\n  });\n\n  // EYES\n\n  TweenMax.to([this.eyeR.scale, this.eyeL.scale], sp / 20, {\n    y: 0,\n    ease: Power1.easeInOut,\n    yoyo: true,\n    repeat: 1,\n  });\n};\n\nMonster.prototype.sit = function () {\n  var sp = 1.2;\n  var ease = Power4.easeOut;\n  var _this = this;\n  TweenMax.to(this.torso.rotation, sp, { x: -1.3, ease: ease });\n  TweenMax.to(this.torso.position, sp, {\n    y: -5,\n    ease: ease,\n    onComplete: function () {\n      _this.nod();\n      gameStatus = \"readyToReplay\";\n    },\n  });\n\n  TweenMax.to(this.head.rotation, sp, {\n    x: Math.PI / 3,\n    y: -Math.PI / 3,\n    ease: ease,\n  });\n  TweenMax.to(this.tail.rotation, sp, { x: 2, y: Math.PI / 4, ease: ease });\n  TweenMax.to(this.pawBL.rotation, sp, { x: -0.1, ease: ease });\n  TweenMax.to(this.pawBR.rotation, sp, { x: -0.1, ease: ease });\n  TweenMax.to(this.pawFL.rotation, sp, { x: 1, ease: ease });\n  TweenMax.to(this.pawFR.rotation, sp, { x: 1, ease: ease });\n  TweenMax.to(this.mouth.rotation, sp, { x: 0.3, ease: ease });\n  TweenMax.to(this.eyeL.scale, sp, { y: 1, ease: ease });\n  TweenMax.to(this.eyeR.scale, sp, { y: 1, ease: ease });\n\n  //TweenMax.to(this.body.rotation, sp, {y:Math.PI/4});\n};\n\nCarrot = function () {\n  this.angle = 0;\n  this.mesh = new THREE.Group();\n\n  var bodyGeom = new THREE.CylinderGeometry(5, 3, 10, 4, 1);\n  bodyGeom.vertices[8].y += 2;\n  bodyGeom.vertices[9].y -= 3;\n\n  this.body = new THREE.Mesh(bodyGeom, pinkMat);\n\n  var leafGeom = new THREE.CubeGeometry(5, 10, 1, 1);\n  leafGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 5, 0));\n  leafGeom.vertices[2].x -= 1;\n  leafGeom.vertices[3].x -= 1;\n  leafGeom.vertices[6].x += 1;\n  leafGeom.vertices[7].x += 1;\n\n  this.leaf1 = new THREE.Mesh(leafGeom, greenMat);\n  this.leaf1.position.y = 7;\n  this.leaf1.rotation.z = 0.3;\n  this.leaf1.rotation.x = 0.2;\n\n  this.leaf2 = this.leaf1.clone();\n  this.leaf2.scale.set(1, 1.3, 1);\n  this.leaf2.position.y = 7;\n  this.leaf2.rotation.z = -0.3;\n  this.leaf2.rotation.x = -0.2;\n\n  this.mesh.add(this.body);\n  this.mesh.add(this.leaf1);\n  this.mesh.add(this.leaf2);\n\n  this.body.traverse(function (object) {\n    if (object instanceof THREE.Mesh) {\n      object.castShadow = true;\n      object.receiveShadow = true;\n    }\n  });\n};\n\nHedgehog = function () {\n  this.angle = 0;\n  this.status = \"ready\";\n  this.mesh = new THREE.Group();\n  var bodyGeom = new THREE.CubeGeometry(6, 6, 6, 1);\n  this.body = new THREE.Mesh(bodyGeom, blackMat);\n\n  var headGeom = new THREE.CubeGeometry(5, 5, 7, 1);\n  this.head = new THREE.Mesh(headGeom, lightBrownMat);\n  this.head.position.z = 6;\n  this.head.position.y = -0.5;\n\n  var noseGeom = new THREE.CubeGeometry(1.5, 1.5, 1.5, 1);\n  this.nose = new THREE.Mesh(noseGeom, blackMat);\n  this.nose.position.z = 4;\n  this.nose.position.y = 2;\n\n  var eyeGeom = new THREE.CubeGeometry(1, 3, 3);\n\n  this.eyeL = new THREE.Mesh(eyeGeom, whiteMat);\n  this.eyeL.position.x = 2.2;\n  this.eyeL.position.z = -0.5;\n  this.eyeL.position.y = 0.8;\n  this.eyeL.castShadow = true;\n  this.head.add(this.eyeL);\n\n  var irisGeom = new THREE.CubeGeometry(0.5, 1, 1);\n\n  this.iris = new THREE.Mesh(irisGeom, blackMat);\n  this.iris.position.x = 0.5;\n  this.iris.position.y = 0.8;\n  this.iris.position.z = 0.8;\n  this.eyeL.add(this.iris);\n\n  this.eyeR = this.eyeL.clone();\n  this.eyeR.children[0].position.x = -this.iris.position.x;\n  this.eyeR.position.x = -this.eyeL.position.x;\n\n  var spikeGeom = new THREE.CubeGeometry(0.5, 2, 0.5, 1);\n  spikeGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, 1, 0));\n\n  for (var i = 0; i < 9; i++) {\n    var row = i % 3;\n    var col = Math.floor(i / 3);\n    var sb = new THREE.Mesh(spikeGeom, blackMat);\n    sb.rotation.x = -Math.PI / 2 + (Math.PI / 12) * row - 0.5 + Math.random();\n    sb.position.z = -3;\n    sb.position.y = -2 + row * 2;\n    sb.position.x = -2 + col * 2;\n    this.body.add(sb);\n    var st = new THREE.Mesh(spikeGeom, blackMat);\n    st.position.y = 3;\n    st.position.x = -2 + row * 2;\n    st.position.z = -2 + col * 2;\n    st.rotation.z = Math.PI / 6 - (Math.PI / 6) * row - 0.5 + Math.random();\n    this.body.add(st);\n\n    var sr = new THREE.Mesh(spikeGeom, blackMat);\n    sr.position.x = 3;\n    sr.position.y = -2 + row * 2;\n    sr.position.z = -2 + col * 2;\n    sr.rotation.z = -Math.PI / 2 + (Math.PI / 12) * row - 0.5 + Math.random();\n    this.body.add(sr);\n\n    var sl = new THREE.Mesh(spikeGeom, blackMat);\n    sl.position.x = -3;\n    sl.position.y = -2 + row * 2;\n    sl.position.z = -2 + col * 2;\n    sl.rotation.z = Math.PI / 2 - (Math.PI / 12) * row - 0.5 + Math.random();\n    this.body.add(sl);\n  }\n\n  this.head.add(this.eyeR);\n  var earGeom = new THREE.CubeGeometry(2, 2, 0.5, 1);\n  this.earL = new THREE.Mesh(earGeom, lightBrownMat);\n  this.earL.position.x = 2.5;\n  this.earL.position.z = -2.5;\n  this.earL.position.y = 2.5;\n  this.earL.rotation.z = -Math.PI / 12;\n  this.earL.castShadow = true;\n  this.head.add(this.earL);\n\n  this.earR = this.earL.clone();\n  this.earR.position.x = -this.earL.position.x;\n  this.earR.rotation.z = -this.earL.rotation.z;\n  this.earR.castShadow = true;\n  this.head.add(this.earR);\n\n  var mouthGeom = new THREE.CubeGeometry(1, 1, 0.5, 1);\n  this.mouth = new THREE.Mesh(mouthGeom, blackMat);\n  this.mouth.position.z = 3.5;\n  this.mouth.position.y = -1.5;\n  this.head.add(this.mouth);\n\n  this.mesh.add(this.body);\n  this.body.add(this.head);\n  this.head.add(this.nose);\n\n  this.mesh.traverse(function (object) {\n    if (object instanceof THREE.Mesh) {\n      object.castShadow = true;\n      object.receiveShadow = true;\n    }\n  });\n};\n\nHedgehog.prototype.nod = function () {\n  var _this = this;\n  var speed = 0.1 + Math.random() * 0.5;\n  var angle = -Math.PI / 4 + (Math.random() * Math.PI) / 2;\n  TweenMax.to(this.head.rotation, speed, {\n    y: angle,\n    onComplete: function () {\n      _this.nod();\n    },\n  });\n};\n\nfunction createHero() {\n  hero = new Hero();\n  hero.mesh.rotation.y = Math.PI / 2;\n  scene.add(hero.mesh);\n  hero.nod();\n}\n\nfunction createMonster() {\n  monster = new Monster();\n  monster.mesh.position.z = 20;\n  //monster.mesh.scale.set(1.2,1.2,1.2);\n  scene.add(monster.mesh);\n  updateMonsterPosition();\n}\n\nfunction updateMonsterPosition() {\n  monster.run();\n  monsterPosTarget -= delta * monsterAcceleration;\n  monsterPos += (monsterPosTarget - monsterPos) * delta;\n  if (monsterPos < 0.56) {\n    gameOver();\n  }\n\n  var angle = Math.PI * monsterPos;\n  monster.mesh.position.y = -floorRadius + Math.sin(angle) * (floorRadius + 12);\n  monster.mesh.position.x = Math.cos(angle) * (floorRadius + 15);\n  monster.mesh.rotation.z = -Math.PI / 2 + angle;\n}\n\nfunction gameOver() {\n  fieldGameOver.className = \"show\";\n  gameStatus = \"gameOver\";\n  monster.sit();\n  hero.hang();\n  monster.heroHolder.add(hero.mesh);\n  TweenMax.to(this, 1, { speed: 0 });\n  TweenMax.to(camera.position, 3, { z: cameraPosGameOver, y: 60, x: -30 });\n  carrot.mesh.visible = false;\n  obstacle.mesh.visible = false;\n  clearInterval(levelInterval);\n}\n\nfunction replay() {\n  gameStatus = \"preparingToReplay\";\n\n  fieldGameOver.className = \"\";\n\n  TweenMax.killTweensOf(monster.pawFL.position);\n  TweenMax.killTweensOf(monster.pawFR.position);\n  TweenMax.killTweensOf(monster.pawBL.position);\n  TweenMax.killTweensOf(monster.pawBR.position);\n\n  TweenMax.killTweensOf(monster.pawFL.rotation);\n  TweenMax.killTweensOf(monster.pawFR.rotation);\n  TweenMax.killTweensOf(monster.pawBL.rotation);\n  TweenMax.killTweensOf(monster.pawBR.rotation);\n\n  TweenMax.killTweensOf(monster.tail.rotation);\n  TweenMax.killTweensOf(monster.head.rotation);\n  TweenMax.killTweensOf(monster.eyeL.scale);\n  TweenMax.killTweensOf(monster.eyeR.scale);\n\n  //TweenMax.killTweensOf(hero.head.rotation);\n\n  monster.tail.rotation.y = 0;\n\n  TweenMax.to(camera.position, 3, {\n    z: cameraPosGame,\n    x: 0,\n    y: 30,\n    ease: Power4.easeInOut,\n  });\n  TweenMax.to(monster.torso.rotation, 2, { x: 0, ease: Power4.easeInOut });\n  TweenMax.to(monster.torso.position, 2, { y: 0, ease: Power4.easeInOut });\n  TweenMax.to(monster.pawFL.rotation, 2, { x: 0, ease: Power4.easeInOut });\n  TweenMax.to(monster.pawFR.rotation, 2, { x: 0, ease: Power4.easeInOut });\n  TweenMax.to(monster.mouth.rotation, 2, { x: 0.5, ease: Power4.easeInOut });\n\n  TweenMax.to(monster.head.rotation, 2, {\n    y: 0,\n    x: -0.3,\n    ease: Power4.easeInOut,\n  });\n\n  TweenMax.to(hero.mesh.position, 2, { x: 20, ease: Power4.easeInOut });\n  TweenMax.to(hero.head.rotation, 2, { x: 0, y: 0, ease: Power4.easeInOut });\n  TweenMax.to(monster.mouth.rotation, 2, { x: 0.2, ease: Power4.easeInOut });\n  TweenMax.to(monster.mouth.rotation, 1, {\n    x: 0.4,\n    ease: Power4.easeIn,\n    delay: 1,\n    onComplete: function () {\n      resetGame();\n    },\n  });\n}\n\nFir = function () {\n  var height = 200;\n  var truncGeom = new THREE.CylinderGeometry(2, 2, height, 6, 1);\n  truncGeom.applyMatrix(new THREE.Matrix4().makeTranslation(0, height / 2, 0));\n  this.mesh = new THREE.Mesh(truncGeom, greenMat);\n  this.mesh.castShadow = true;\n};\n\nvar firs = new THREE.Group();\n\nfunction createFirs() {\n  var nTrees = 100;\n  for (var i = 0; i < nTrees; i++) {\n    var phi = (i * (Math.PI * 2)) / nTrees;\n    var theta = Math.PI / 2;\n    //theta += .25 + Math.random()*.3;\n    theta +=\n      Math.random() > 0.05\n        ? 0.25 + Math.random() * 0.3\n        : -0.35 - Math.random() * 0.1;\n\n    var fir = new Tree();\n    fir.mesh.position.x = Math.sin(theta) * Math.cos(phi) * floorRadius;\n    fir.mesh.position.y = Math.sin(theta) * Math.sin(phi) * (floorRadius - 10);\n    fir.mesh.position.z = Math.cos(theta) * floorRadius;\n\n    var vec = fir.mesh.position.clone();\n    var axis = new THREE.Vector3(0, 1, 0);\n    fir.mesh.quaternion.setFromUnitVectors(axis, vec.clone().normalize());\n    floor.add(fir.mesh);\n  }\n}\n\nfunction createCarrot() {\n  carrot = new Carrot();\n  scene.add(carrot.mesh);\n}\n\nfunction updateCarrotPosition() {\n  carrot.mesh.rotation.y += delta * 6;\n  carrot.mesh.rotation.z = Math.PI / 2 - (floorRotation + carrot.angle);\n  carrot.mesh.position.y =\n    -floorRadius + Math.sin(floorRotation + carrot.angle) * (floorRadius + 50);\n  carrot.mesh.position.x =\n    Math.cos(floorRotation + carrot.angle) * (floorRadius + 50);\n}\n\nfunction updateObstaclePosition() {\n  if (obstacle.status == \"flying\") return;\n\n  // TODO fix this,\n  if (floorRotation + obstacle.angle > 2.5) {\n    obstacle.angle = -floorRotation + Math.random() * 0.3;\n    obstacle.body.rotation.y = Math.random() * Math.PI * 2;\n  }\n\n  obstacle.mesh.rotation.z = floorRotation + obstacle.angle - Math.PI / 2;\n  obstacle.mesh.position.y =\n    -floorRadius + Math.sin(floorRotation + obstacle.angle) * (floorRadius + 3);\n  obstacle.mesh.position.x =\n    Math.cos(floorRotation + obstacle.angle) * (floorRadius + 3);\n}\n\nfunction updateFloorRotation() {\n  floorRotation += delta * 0.03 * speed;\n  floorRotation = floorRotation % (Math.PI * 2);\n  floor.rotation.z = floorRotation;\n}\n\nfunction createObstacle() {\n  obstacle = new Hedgehog();\n  obstacle.body.rotation.y = -Math.PI / 2;\n  obstacle.mesh.scale.set(1.1, 1.1, 1.1);\n  obstacle.mesh.position.y = floorRadius + 4;\n  obstacle.nod();\n  scene.add(obstacle.mesh);\n}\n\nfunction createBonusParticles() {\n  bonusParticles = new BonusParticles();\n  bonusParticles.mesh.visible = false;\n  scene.add(bonusParticles.mesh);\n}\n\nfunction checkCollision() {\n  var db = hero.mesh.position.clone().sub(carrot.mesh.position.clone());\n  var dm = hero.mesh.position.clone().sub(obstacle.mesh.position.clone());\n\n  if (db.length() < collisionBonus) {\n    getBonus();\n  }\n\n  if (dm.length() < collisionObstacle && obstacle.status != \"flying\") {\n    getMalus();\n  }\n}\n\nfunction getBonus() {\n  bonusParticles.mesh.position.copy(carrot.mesh.position);\n  bonusParticles.mesh.visible = true;\n  bonusParticles.explose();\n  carrot.angle += Math.PI / 2;\n  //speed*=.95;\n  monsterPosTarget += 0.025;\n}\n\nfunction getMalus() {\n  obstacle.status = \"flying\";\n  var tx =\n    Math.random() > 0.5 ? -20 - Math.random() * 10 : 20 + Math.random() * 5;\n  TweenMax.to(obstacle.mesh.position, 4, {\n    x: tx,\n    y: Math.random() * 50,\n    z: 350,\n    ease: Power4.easeOut,\n  });\n  TweenMax.to(obstacle.mesh.rotation, 4, {\n    x: Math.PI * 3,\n    z: Math.PI * 3,\n    y: Math.PI * 6,\n    ease: Power4.easeOut,\n    onComplete: function () {\n      obstacle.status = \"ready\";\n      obstacle.body.rotation.y = Math.random() * Math.PI * 2;\n      obstacle.angle = -floorRotation - Math.random() * 0.4;\n\n      obstacle.angle = obstacle.angle % (Math.PI * 2);\n      obstacle.mesh.rotation.x = 0;\n      obstacle.mesh.rotation.y = 0;\n      obstacle.mesh.rotation.z = 0;\n      obstacle.mesh.position.z = 0;\n    },\n  });\n  //\n  monsterPosTarget -= 0.04;\n  TweenMax.from(this, 0.5, {\n    malusClearAlpha: 0.5,\n    onUpdate: function () {\n      renderer.setClearColor(malusClearColor, malusClearAlpha);\n    },\n  });\n}\n\nfunction updateDistance() {\n  distance += delta * speed;\n  var d = distance / 2;\n  fieldDistance.innerHTML = Math.floor(d);\n}\n\nfunction updateLevel() {\n  if (speed >= maxSpeed) return;\n  level++;\n  speed += 2;\n}\n\nfunction loop() {\n  delta = clock.getDelta();\n  updateFloorRotation();\n\n  if (gameStatus == \"play\") {\n    if (hero.status == \"running\") {\n      hero.run();\n    }\n    updateDistance();\n    updateMonsterPosition();\n    updateCarrotPosition();\n    updateObstaclePosition();\n    checkCollision();\n  }\n\n  render();\n  requestAnimationFrame(loop);\n}\n\nfunction render() {\n  renderer.render(scene, camera);\n}\n\nwindow.addEventListener(\"load\", init, false);\n\nfunction init(event) {\n  initScreenAnd3D();\n  createLights();\n  createFloor();\n  createHero();\n  createMonster();\n  createFirs();\n  createCarrot();\n  createBonusParticles();\n  createObstacle();\n  initUI();\n  resetGame();\n  loop();\n\n  //setInterval(hero.blink.bind(hero), 3000);\n}\n\nfunction resetGame() {\n  scene.add(hero.mesh);\n  hero.mesh.rotation.y = Math.PI / 2;\n  hero.mesh.position.y = 0;\n  hero.mesh.position.z = 0;\n  hero.mesh.position.x = 0;\n\n  monsterPos = 0.56;\n  monsterPosTarget = 0.65;\n  speed = initSpeed;\n  level = 0;\n  distance = 0;\n  carrot.mesh.visible = true;\n  obstacle.mesh.visible = true;\n  gameStatus = \"play\";\n  hero.status = \"running\";\n  hero.nod();\n  //   audio.play();\n  updateLevel();\n  levelInterval = setInterval(updateLevel, levelUpdateFreq);\n}\n\nfunction initUI() {\n  fieldDistance = document.getElementById(\"distValue\");\n  fieldGameOver = document.getElementById(\"gameoverInstructions\");\n}\n\n////////////////////////////////////////////////\n//                                        MODELS\n////////////////////////////////////////////////\n\n// TREE\n\nTree = function () {\n  this.mesh = new THREE.Object3D();\n  this.trunc = new Trunc();\n  this.mesh.add(this.trunc.mesh);\n};\n\nTrunc = function () {\n  var truncHeight = 50 + Math.random() * 150;\n  var topRadius = 1 + Math.random() * 5;\n  var bottomRadius = 5 + Math.random() * 5;\n  var mats = [\n    blackMat,\n    brownMat,\n    pinkMat,\n    whiteMat,\n    greenMat,\n    lightBrownMat,\n    pinkMat,\n  ];\n  var matTrunc = blackMat; //mats[Math.floor(Math.random()*mats.length)];\n  var nhSegments = 3; //Math.ceil(2 + Math.random()*6);\n  var nvSegments = 3; //Math.ceil(2 + Math.random()*6);\n  var geom = new THREE.CylinderGeometry(\n    topRadius,\n    bottomRadius,\n    truncHeight,\n    nhSegments,\n    nvSegments\n  );\n  geom.applyMatrix(new THREE.Matrix4().makeTranslation(0, truncHeight / 2, 0));\n\n  this.mesh = new THREE.Mesh(geom, matTrunc);\n\n  for (var i = 0; i < geom.vertices.length; i++) {\n    var noise = Math.random();\n    var v = geom.vertices[i];\n    v.x += -noise + Math.random() * noise * 2;\n    v.y += -noise + Math.random() * noise * 2;\n    v.z += -noise + Math.random() * noise * 2;\n\n    geom.computeVertexNormals();\n\n    // FRUITS\n\n    if (Math.random() > 0.7) {\n      var size = Math.random() * 3;\n      var fruitGeometry = new THREE.CubeGeometry(size, size, size, 1);\n      var matFruit = mats[Math.floor(Math.random() * mats.length)];\n      var fruit = new THREE.Mesh(fruitGeometry, matFruit);\n      fruit.position.x = v.x;\n      fruit.position.y = v.y + 3;\n      fruit.position.z = v.z;\n      fruit.rotation.x = Math.random() * Math.PI;\n      fruit.rotation.y = Math.random() * Math.PI;\n\n      this.mesh.add(fruit);\n    }\n\n    // BRANCHES\n\n    if (Math.random() > 0.5 && v.y > 10 && v.y < truncHeight - 10) {\n      var h = 3 + Math.random() * 5;\n      var thickness = 0.2 + Math.random();\n\n      var branchGeometry = new THREE.CylinderGeometry(\n        thickness / 2,\n        thickness,\n        h,\n        3,\n        1\n      );\n      branchGeometry.applyMatrix(\n        new THREE.Matrix4().makeTranslation(0, h / 2, 0)\n      );\n      var branch = new THREE.Mesh(branchGeometry, matTrunc);\n      branch.position.x = v.x;\n      branch.position.y = v.y;\n      branch.position.z = v.z;\n\n      var vec = new THREE.Vector3(v.x, 2, v.z);\n      var axis = new THREE.Vector3(0, 1, 0);\n      branch.quaternion.setFromUnitVectors(axis, vec.clone().normalize());\n\n      this.mesh.add(branch);\n    }\n  }\n\n  this.mesh.castShadow = true;\n};\n\n// window.addEventListener(\"load\", init, false);\n\ninit();\n\nconsole.log(\"ret: \", \"ret\");\n"],"sourceRoot":""}