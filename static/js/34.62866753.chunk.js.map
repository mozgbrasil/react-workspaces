{"version":3,"sources":["pages/WebApis.js"],"names":["arrConsole","orig","console","log","apply","Date","toISOString","replace","arguments","push","WebApis","props","state","json","ChromeSamples","line","Array","prototype","slice","call","map","argument","JSON","stringify","join","document","querySelector","textContent","clearLog","setStatus","status","setContent","newContent","content","hasChildNodes","removeChild","lastChild","appendChild","window","addEventListener","error","message","preventDefault","event","body","value","classList","add","remove","navigator","bluetooth","requestDevice","filters","services","name","namePrefix","optionalServices","then","device","catch","imageCapture","drawCanvas","canvas","img","width","getComputedStyle","split","height","ratio","Math","min","x","y","getContext","clearRect","drawImage","report","fetch","response","Error","geo_status","geo_map_link","href","geolocation","getCurrentPosition","position","latitude","coords","longitude","mediaDevices","getUserMedia","video","mediaStream","srcObject","track","getVideoTracks","ImageCapture","grabFrame","imageBitmap","takePhoto","blob","createImageBitmap","permissions","query","result","onchange","near","mozPower","screenEnabled","vibrate","obj","filterConsole","Object","entries","forEach","entry","this","setState","id","target","rel","autoPlay","className","React","Component"],"mappings":"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","file":"static/js/34.62866753.chunk.js","sourcesContent":["import React from \"react\";\n// import { SpinnerFlexButton as Loading } from \"./components/Util\";\n\nvar arrConsole = [];\nvar orig = console.log;\nconsole.log = function log() {\n  orig.apply(console, [\n    `[${new Date().toISOString().replace(\"T\", \" \").replace(/\\..+/, \"\")}]`,\n    ...arguments,\n  ]);\n  arrConsole.push(...arguments);\n};\n\nexport default class WebApis extends React.Component {\n  constructor(props) {\n    super(props);\n    // console.log(\"constructor\");\n    this.state = {\n      json: false,\n    };\n  }\n\n  componentDidMount() {\n    // console.log(\"componentDidMount: \", this);\n\n    //\n\n    var ChromeSamples = {\n      log: function () {\n        var line = Array.prototype.slice\n          .call(arguments)\n          .map(function (argument) {\n            return typeof argument === \"string\"\n              ? argument\n              : JSON.stringify(argument);\n          })\n          .join(\" \");\n\n        document.querySelector(\"#log\").textContent += line + \"\\n\";\n      },\n\n      clearLog: function () {\n        document.querySelector(\"#log\").textContent = \"\";\n      },\n\n      setStatus: function (status) {\n        document.querySelector(\"#status\").textContent = status;\n      },\n\n      setContent: function (newContent) {\n        var content = document.querySelector(\"#content\");\n        while (content.hasChildNodes()) {\n          content.removeChild(content.lastChild);\n        }\n        content.appendChild(newContent);\n      },\n    };\n\n    // Add a global error event listener early on in the page load, to help ensure that browsers\n    // which don't support specific functionality still end up displaying a meaningful message.\n    window.addEventListener(\"error\", function (error) {\n      if (ChromeSamples && ChromeSamples.setStatus) {\n        console.error(error);\n        ChromeSamples.setStatus(\n          error.message + \" (Your browser may not support this feature.)\"\n        );\n        error.preventDefault();\n      }\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Ambient_Light_Events\n\n    if (\"ondevicelight\" in window) {\n      window.addEventListener(\"devicelight\", function (event) {\n        var body = document.querySelector(\"body\");\n        if (event.value < 50) {\n          body.classList.add(\"darklight\");\n          body.classList.remove(\"brightlight\");\n        } else {\n          body.classList.add(\"brightlight\");\n          body.classList.remove(\"darklight\");\n        }\n      });\n    } else {\n      console.log(\"devicelight event not supported\");\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Web_Bluetooth_API\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Bluetooth/requestDevice\n\n    if (\"bluetooth\" in navigator && navigator.bluetooth.requestDevice) {\n      // Discovery options match any devices advertising:\n      // . The standard heart rate service.\n      // . Both 16-bit service IDs 0x1802 and 0x1803.\n      // . A proprietary 128-bit UUID service c48e6067-5295-48d3-8d5c-0395f61792b1.\n      // . Devices with name \"ExampleName\".\n      // . Devices with name starting with \"Prefix\".\n      //\n      // And enables access to the battery service if devices\n      // include it, even if devices do not advertise that service.\n      let options = {\n        filters: [\n          { services: [\"heart_rate\"] },\n          { services: [0x1802, 0x1803] },\n          { services: [\"c48e6067-5295-48d3-8d5c-0395f61792b1\"] },\n          { name: \"ExampleName\" },\n          { namePrefix: \"Prefix\" },\n        ],\n        optionalServices: [\"battery_service\"],\n      };\n\n      navigator.bluetooth\n        .requestDevice(options)\n        .then(function (device) {\n          console.log(\"Name: \" + device.name);\n          // Do something with the device.\n        })\n        .catch(function (error) {\n          console.log(\"Something went wrong. \" + error);\n        });\n    } else {\n      console.log(\"Fail: navigator.bluetooth.requestDevice\");\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Request\n\n    var request = \"https://express.mozgbrasil.now.sh/\";\n    fetch(request)\n      .then((response) => {\n        if (response.status === 200) {\n          return response.json();\n        } else {\n          throw new Error(\"Something went wrong on api server!\");\n        }\n      })\n      .then((response) => {\n        console.log(response);\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API\n\n    function geoFindMe() {\n      const geo_status = document.querySelector(\"#geo_status\");\n      const geo_map_link = document.querySelector(\"#geo_map_link\");\n\n      geo_map_link.href = \"\";\n      geo_map_link.textContent = \"\";\n\n      function success(position) {\n        const latitude = position.coords.latitude;\n        const longitude = position.coords.longitude;\n\n        geo_status.textContent = \"\";\n        geo_map_link.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;\n        geo_map_link.textContent = `Latitude: ${latitude} °, Longitude: ${longitude} °`;\n      }\n\n      function error() {\n        geo_status.textContent = \"Unable to retrieve your location\";\n      }\n\n      if (!navigator.geolocation) {\n        geo_status.textContent = \"Geolocation is not supported by your browser\";\n      } else {\n        geo_status.textContent = \"Locating…\";\n        navigator.geolocation.getCurrentPosition(success, error);\n      }\n    }\n\n    document.querySelector(\"#find-me\").addEventListener(\"click\", geoFindMe);\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/ImageCapture\n\n    var imageCapture;\n\n    function onGetUserMediaButtonClick() {\n      navigator.mediaDevices\n        .getUserMedia({ video: true })\n        .then((mediaStream) => {\n          document.querySelector(\"video\").srcObject = mediaStream;\n\n          const track = mediaStream.getVideoTracks()[0];\n          imageCapture = new ImageCapture(track);\n        })\n        .catch((error) => console.log(error));\n    }\n\n    function onGrabFrameButtonClick() {\n      imageCapture\n        .grabFrame()\n        .then((imageBitmap) => {\n          const canvas = document.querySelector(\"#grabFrameCanvas\");\n          drawCanvas(canvas, imageBitmap);\n        })\n        .catch((error) => console.log(error));\n    }\n\n    function onTakePhotoButtonClick() {\n      imageCapture\n        .takePhoto()\n        .then((blob) => createImageBitmap(blob))\n        .then((imageBitmap) => {\n          const canvas = document.querySelector(\"#takePhotoCanvas\");\n          drawCanvas(canvas, imageBitmap);\n        })\n        .catch((error) => console.log(error));\n    }\n\n    function drawCanvas(canvas, img) {\n      canvas.width = getComputedStyle(canvas).width.split(\"px\")[0];\n      canvas.height = getComputedStyle(canvas).height.split(\"px\")[0];\n      let ratio = Math.min(\n        canvas.width / img.width,\n        canvas.height / img.height\n      );\n      let x = (canvas.width - img.width * ratio) / 2;\n      let y = (canvas.height - img.height * ratio) / 2;\n      canvas.getContext(\"2d\").clearRect(0, 0, canvas.width, canvas.height);\n      canvas\n        .getContext(\"2d\")\n        .drawImage(\n          img,\n          0,\n          0,\n          img.width,\n          img.height,\n          x,\n          y,\n          img.width * ratio,\n          img.height * ratio\n        );\n    }\n\n    document\n      .querySelector(\"#getUserMediaButton\")\n      .addEventListener(\"click\", onGetUserMediaButtonClick);\n    document\n      .querySelector(\"#grabFrameButton\")\n      .addEventListener(\"click\", onGrabFrameButtonClick);\n    document\n      .querySelector(\"#takePhotoButton\")\n      .addEventListener(\"click\", onTakePhotoButtonClick);\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Permissions_API/Using_the_Permissions_API\n\n    function handlePermission() {\n      navigator.permissions\n        .query({ name: \"geolocation\" })\n        .then(function (result) {\n          if (result.state === \"granted\") {\n            report(result.state);\n            // geoBtn.style.display = \"none\";\n          } else if (result.state === \"prompt\") {\n            report(result.state);\n            // geoBtn.style.display = \"none\";\n            // navigator.geolocation.getCurrentPosition(\n            //   revealPosition,\n            //   positionDenied,\n            //   geoSettings\n            // );\n          } else if (result.state === \"denied\") {\n            report(result.state);\n            // geoBtn.style.display = \"inline\";\n          }\n          result.onchange = function () {\n            report(result.state);\n          };\n        });\n    }\n\n    function report(state) {\n      console.log(\"Permission \" + state);\n    }\n\n    handlePermission();\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Proximity_Events\n\n    window.addEventListener(\"userproximity\", function (event) {\n      if (event.near) {\n        // let's power off the screen\n        navigator.mozPower.screenEnabled = false;\n      } else {\n        // Otherwise, let's power on the screen\n        navigator.mozPower.screenEnabled = true;\n      }\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Vibration_API\n\n    if (\"vibrate\" in window.navigator || \"mozVibrate\" in window.navigator) {\n      window.navigator.vibrate(200); // vibrate for 200ms\n    }\n\n    // Write Json Console\n\n    var obj = arrConsole;\n\n    var filterConsole = [];\n\n    // for (var prop in obj) {\n    Object.entries(obj).forEach((entry) => {\n      // let key = entry[0];\n      let value = entry[1];\n      // console.log(\"key: \" + key + \" = \" + value + \" / \" + typeof value);\n      var condition = typeof value === \"string\";\n      // console.log(\"condition: \", condition);\n      if (condition) {\n        filterConsole.push(value);\n      }\n    });\n\n    // console.log(\"filterConsole: \", filterConsole);\n\n    obj = filterConsole;\n\n    var json = JSON.stringify(obj);\n    this.setState({ json: json });\n    //\n  }\n\n  render() {\n    // console.log(\"this: \", this);\n    return (\n      <>\n        {(() => {\n          // var object = Object.getOwnPropertyNames(window).sort();\n          // console.log(\"object: \", object);\n          // console.log(\"typeof object: \", typeof object);\n          // var json = JSON.stringify(object);\n          // console.log(\"json: \", json);\n          // this.setState({ json: json });\n        })()}\n        <span>\n          <hr />\n        </span>\n        Console\n        <span>\n          <hr />\n        </span>\n        <code>{this.state.json}</code>\n        <span>\n          <hr />\n        </span>\n        Geolocation\n        <span>\n          <hr />\n        </span>\n        <button id='find-me'>Show my location</button>\n        <br />\n        <p id='geo_status'>&nbsp;</p>\n        <a\n          id='geo_map_link'\n          href='#top'\n          target='_blank'\n          rel='noopener noreferrer'\n        >\n          &nbsp;\n        </a>\n        <span>\n          <hr />\n        </span>\n        ImageCapture\n        <span>\n          <hr />\n        </span>\n        <h1>Image Capture / Grab Frame - Take Photo Sample</h1>\n        <div id='results'>\n          <div>\n            <video autoPlay=''></video>\n            <button id='getUserMediaButton'>Get User Media</button>\n          </div>\n          <div>\n            <canvas id='grabFrameCanvas' width='264' height='198'></canvas>\n            <button id='grabFrameButton'>Grab Frame</button>\n          </div>\n          <div>\n            <canvas id='takePhotoCanvas' width='264' height='198'></canvas>\n            <button id='takePhotoButton'>Take Photo</button>\n          </div>\n        </div>\n        <h3>Live Output</h3>\n        <div id='output' className='output'>\n          <div id='content'></div>\n          <div id='status'></div>\n          <pre id='log'></pre>\n        </div>\n        <span>\n          <hr />\n        </span>\n      </>\n    );\n  }\n}\n"],"sourceRoot":""}